<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đề thi trắc nghiệm</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        .container {
            max-width: 600px;
            margin: auto;
        }

        .question {
            font-size: 18px;
            margin-bottom: 10px;
            text-align: left;
        }

        .options label {
            display: block;
            margin: 5px 0;
            cursor: pointer;
        }

        .correct {
            color: green;
            font-weight: bold;
        }

        .incorrect {
            color: red;
            font-weight: bold;
        }

        button {
            margin-top: 10px;
            padding: 10px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div class="container">
        <h2>Đề thi trắc nghiệm</h2>
        <div id="quiz"></div>
        <button onclick="submitQuiz()">Nộp bài</button>
        <h3 id="result"></h3>
    </div>

    <script>
        let questions = [];

        async function fetchQuestions() {
            try {
                const response = await fetch('https://quizapp-1-vwbx.onrender.com/questions');

                questions = await response.json();
                renderQuestions();
            } catch (error) {
                console.error('Lỗi lấy dữ liệu:', error);
            }
        }


        function renderQuestions() {
            const quizDiv = document.getElementById("quiz");
            quizDiv.innerHTML = "";
            questions.forEach((q, index) => {
                let optionsHtml = q.options.map((option, i) =>
                    `<label><input type="radio" name="question${index}" value="${i}"> ${option}</label>`
                ).join('');
                quizDiv.innerHTML += `
                    <div class="question">
                        <p><strong>Câu ${index + 1}:</strong> ${q.question}</p>
                        <div class="options">${optionsHtml}</div>
                        <p id="answer${index}" class="correct" style="display: none;">Đáp án đúng: ${q.options[q.answer]}</p>
                    </div>
                `;
            });
        }

        function submitQuiz() {
            let score = 0;
            questions.forEach((q, index) => {
                const selected = document.querySelector(`input[name='question${index}']:checked`);
                if (selected) {
                    if (parseInt(selected.value) === q.answer) {
                        score++;
                    } else {
                        document.getElementById(`answer${index}`).style.display = "block";
                    }
                }
            });
            document.getElementById("result").textContent = `Bạn đạt ${score} / ${questions.length} điểm`;
        }

        fetchQuestions();
    </script>
</body>

</html>